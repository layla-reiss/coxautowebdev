<html>
    <head>
        <title>Form</title>
        <link rel="stylesheet" href="/styles.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
            $("#equals").click(function(){
                document.getElementById("pain").hidden = false;
                event.stopPropagation();
                event.preventDefault();
                let firstNumber = $("#firstNumber").val()
                let secondNumber = $("#secondNumber").val()
                let operation = $('#dropdown').find(":selected").val();
                var data = {
                    firstNumber: firstNumber,
                    secondNumber: secondNumber,
                    operation: operation
                }
                $.ajax({
                type: "POST",
                url: "https://funkshun.azurewebsites.net/api/newcodewow?code=wq7JneFo_7sJueCWfE2Z7kUQG4bD3KdrVKaUd8ijk380AzFu6swiUg==",
                data: JSON.stringify(data),
                success: function(response)
                {
                    alert(response);
                    document.getElementById("answer").innerText = response;
                },
                contentType: "application/json; charset=utf-8"
                });
            });
            });

            function addNumber(value)
            {
             let text = document.getElementById("screen").innerText;
             text += value;
             document.getElementById("screen").innerText = text;
            }

            function calculation()
            {
                let problem = document.getElementById("screen").innerText;
                let splitproblem = []
                let index = 0;
                for (let i = 0; i < problem.length; i++)
                {
                    let lastOperator = "";
                    if (problem[i] == "+" || problem[i] == "-" || problem[i] == "*" || problem[i] == "/")
                    {
                        splitproblem.push(problem.slice(0, index-2));
                        splitproblem.push(problem[i]);
                        lastOperator = problem[i];
                    }
                }          
                alert(splitproblem);
            }
        </script>
    </head>
    <body>
        <div id="calculatornew">
            <div id="calculatorDisplay">
                <label id="screen"></label>
            </div>
            <div id="123">
                <button class="btn btn-light" onclick="addNumber('1')">1</button>
                <button class="btn btn-light" onclick="addNumber('2')">2</button>
                <button class="btn btn-light" onclick="addNumber('3')">3</button>
                <button  class="btn btn-success" onclick="addNumber('+')" data-bs-toggle="tooltip" data-bs-placement="top"
                data-bs-custom-class="custom-tooltip"
                data-bs-title="This top tooltip is themed via CSS variables.">+</button>
            </div>
            <div id="456">
                <button class="btn btn-light" onclick="addNumber('4')">4</button>
                <button class="btn btn-light" onclick="addNumber('5')">5</button>
                <button class="btn btn-light" onclick="addNumber('6')">6</button>
                <button  class="btn btn-danger" onclick="addNumber('-')">-</button>
            </div>        
            <div id="789">
                <button class="btn btn-light" onclick="addNumber('7')">7</button>
                <button class="btn btn-light" onclick="addNumber('8')">8</button>
                <button class="btn btn-light" onclick="addNumber('9')">9</button>
                <button  class="btn btn-warning" onclick="addNumber('*')">*</button>
            </div>
            <div id="000">
                <button class="btn btn-light" onclick="addNumber('0')">0</button>
                <button class="btn btn-light" onclick="addNumber('.')">.</button>
                <button class="btn btn-light" id="equals" onclick=calculation() >=</button>
                <button  class="btn btn-info" onclick="addNumber('/')">/</button>
            </div>
        </div>
        <div class="spinner-border text-success" id="pain" role="status" hidden=true>
            <span class="visually-hidden">Loading...</span>
        </div>
    </body>
</html>